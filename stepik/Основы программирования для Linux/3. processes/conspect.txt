fork -> точная копия процесса
exec -> замещение образа


fork
---------
parent -> child
сhild не наследует
  1) блокировки памяти
  2) список сигналов, ожидающий обработки
  3) таймеры
os меняет pid и ppid


  pid_t pid = fork();
  if (pid == 0) { // потомок
    exec("/usr/bin/child");
    exit(0);
  } else { // родитель
    waitpid(pid);
  }

https://www.ibm.com/developerworks/ru/library/au-unixprocess/


Контекст процесса:
  * Открытые файлы
  * Файловые системы(mount)
  * Операции ввода/вывода
  * Сетевое окружение
  * Множество идентификаторов процессов
  * Память
  * Состояние регистров
  * Имя хостя(hostname)


Порядок создания демона
  * fork: создание процесса
  * в демоне перейти в корневой каталог: '/'
  * Установить в демоне новый идентификатор сессии: setsid(2): 2 - номер раздела справки, т.е man 2 setsid
  * Закрыть файлы стандартного i/o: close(stdin); close(stdout); close(stderr)
